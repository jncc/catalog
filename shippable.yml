language: node_js

# not sure why i used an old node.js - todo update to v6 / latest
node_js:
  - 8.2.1

# only build master and all branches beginning with "beta"
branches:
  only:
    - master # - beta*
#    - dockerless

build:
  ci:
    - pip install sphinx
    - yarn install
    - yarn run build # todo: run tests too
    - pip install --upgrade botocore # workaround https://github.com/Shippable/support/issues/3304
    - pip install setuptools==34.0.1

integrations:
  deploy:
    - integrationName: "aws-jncc-prod-subscription-integration"
      type: aws
      target: eb_paas
      platform: "Node.js"
      application_name: Catalog
      env_name: jncc-catalog-env
      region: "eu-west-1"

env:
  - secure: GgB6SZxjRZWCvsGSEnhXgFT/sNQMlOh2J2kVKbsQW7uS6qAPGASwT54o0doi9665o0pM7VLL6NQpt8VQBnw9cvjdxNL4C8A2SvDV5229Ki4pP5IOYBQ6hFs0jGybC1pR6e0JumHF0uwrgS6fKEBwSdfd1X/6gl1/LV9Ot6yBVZxBg0JujRmDna/T+HGud4Wr8A0Mx8XKUbK3gKCetzyUgBZzs2wZftyVVq8PpCAPpMwPs/j/Lu+f2BqdVPK8OQ/KZkmcd44GksFFdUajjl9skRIPq87jNfMHu+xr8njpaqbnkQYAbfK0hLc9wPYBROWouiKtEZir6kPBArUYzVP9gQ==

